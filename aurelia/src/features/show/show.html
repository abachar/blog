<template>
    <require from="./show.css"></require>
    <require from="../../converters/date-format"></require>
    <require from="../../converters/nl2br"></require>
    <require from="../../components/comments/comments"></require>

    <h2>${post.title}</h2>

    <section class="post">
        <h5>
            Posted on <time class="label label-primary">${post.createdAt | dateFormat}</time>
            by <strong>${post.author}</strong>
        </h5>
        <p innerHTML.bind="post.content | nl2br"></p>
        <div class="tags">
            <span>Tags:</span>
            <span class="label label-default" repeat.for="tag of post.tags">${tag}</span>
        </div>
    </section>

    <section class="comments">
        <comments items.bind="post.comments"></comments>

        <form submit.delegate="addComment()">
            <fieldset>
                <legend>Leave a comment</legend>
                <p>All fields are required</p>

                <p class="alert alert-danger" if.bind="hasErrors">
                    An error occurred when saving the comment
                </p>

                <div class="form-group">
                    <label class="control-label">Your name *</label>
                    <input type="text" class="form-control" value.bind="comment.author" />
                </div>

                <div class="form-group">
                    <label class="control-label">Your Comment *</label>
                    <textarea class="form-control"rows="4" value.bind="comment.content"></textarea>
                </div>

                <div class="form-group">
                    <div class="controls">
                        <button type="submit" class="btn btn-primary"
                                disabled.bind="!validation.result.isValid">Add comment</button>
                    </div>
                </div>

            </fieldset>
        </form>

    </section>
</template>